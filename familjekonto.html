<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1"
    />
    <meta name="description" content="Jonas Eriksson very basic landing page" />
    <meta name="author" content="Jonas Eriksson" />
    <link rel="shortcut icon" href="images/familjekonto.png" />
    <link rel="apple-touch-icon" href="images/familjekonto.png" />
    <title>Jonas Eriksson - Familjekonto</title>
    <link href="css/bootstrap.min.css" rel="stylesheet" />
  </head>
  <body>
    <div class="jumbotron">
      <div class="container">
        <h1>Familjekonto</h1>
        <p class="text-muted">
          <small>
            Familjekonto räknar ut hur mycket varje partner får behålla samt vad
            som ska sättas in på det gemensamma kontot.
          </small>
        </p>
      </div>
    </div>
    <div class="container">
      <div class="row">
        <div class="col-sm-6 col-md-5 col-lg-4">
          <form id="form" role="form">
            <div class="form-group row">
              <label for="salaryA" class="col-sm-4 col-form-label"
                >Inkomst A</label
              >
              <div class="col-sm-8">
                <input
                  type="number"
                  class="form-control"
                  id="salaryA"
                  aria-describedby="salaryAHelp"
                  placeholder="32000"
                  required
                />
                <small id="salaryAHelp" class="form-text text-muted"
                  >Inkomst efter skatt i hela kronor</small
                >
              </div>
            </div>
            <div class="form-group row">
              <label for="salaryB" class="col-sm-4 col-form-label"
                >Inkomst B</label
              >
              <div class="col-sm-8">
                <input
                  type="number"
                  class="form-control"
                  id="salaryB"
                  aria-describedby="salaryBHelp"
                  placeholder="35000"
                  required
                />
                <small id="salaryBHelp" class="form-text text-muted"
                  >Inkomst efter skatt i hela kronor</small
                >
              </div>
            </div>
            <div class="form-group row">
              <label for="total" class="col-sm-4 col-form-label"
                >Insättning</label
              >
              <div class="col-sm-8">
                <input
                  type="number"
                  class="form-control"
                  id="total"
                  aria-describedby="totalHelp"
                  value="45000"
                  placeholder="45000"
                  required
                />
                <small id="totalHelp" class="form-text text-muted"
                  >Summa att sätta in på familjekontot</small
                >
              </div>
            </div>
            <div class="form-group row">
              <div class="col-sm-offset-4 col-sm-8">
                <button class="btn btn-default" type="submit">Submit</button>
              </div>
            </div>
          </form>
        </div>
      </div>
      <div id="result" class="row">
        <div class="col-sm-6 col-md-5 col-lg-4">
          <h3>Resultat</h3>
          <p>Respektive partner får behålla <span id="keep"></span> kr</p>
          <h4>Överföringar</h4>
          <div class="row">
            <label class="col-sm-4">Inkomst A</label>
            <div class="col-sm-8" id="transferA"></div>
          </div>
          <div class="row">
            <label class="col-sm-4">Inkomst B</label>
            <div class="col-sm-8" id="transferB"></div>
          </div>
        </div>
      </div>
      <hr />
      <footer>
        <p>&copy; Jonas Eriksson 2025</p>
      </footer>
    </div>

    <script src="js/jquery-1.12.4.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script>
      // format number 1234567 to 1 234 567
      const formatNumber = (n) =>
        n
          .toString()
          .replace(/\D/g, "")
          .replace(/\B(?=(\d{3})+(?!\d))/g, " ");

      // when the DOM is ready
      $(function () {
        $("#result").hide();

        $("#form").submit((e) => {
          e.preventDefault();

          const salaryA = parseInt($("#salaryA").val());
          const salaryB = parseInt($("#salaryB").val());
          const total = parseInt($("#total").val());
          const totalSalary = salaryA + salaryB;

          if (totalSalary < total) {
            alert(
              `Totala inkomsten ${formatNumber(
                totalSalary
              )} kr understiger förväntad insättning ${formatNumber(total)} kr.`
            );
            $("#result").hide();
            return false;
          }

          const eachKeep = Math.floor((totalSalary - total) / 2);

          $("#keep").html(formatNumber(eachKeep));
          $("#transferA").html(`${formatNumber(salaryA - eachKeep)} kr`);
          $("#transferB").html(`${formatNumber(salaryB - eachKeep)} kr`);
          $("#result").fadeIn();
          $([document.documentElement, document.body]).animate(
            {
              scrollTop: $("#result").offset().top,
            },
            1000
          );
        });
      });
    </script>
  </body>
</html>
